# =============================================================================
#                    MY SELF-HOSTED AI KIT - ENVIRONMENT VARIABLES
# =============================================================================
#
# üá™üá∏ ESPA√ëOL / üá¨üáß ENGLISH
#
# Este archivo es una PLANTILLA con ejemplos. Debes copiarlo y personalizarlo.
# This file is a TEMPLATE with examples. You must copy and customize it.
#
# =============================================================================
# üìã INSTRUCCIONES R√ÅPIDAS / QUICK INSTRUCTIONS
# =============================================================================
#
# 1. Copia este archivo / Copy this file:
#    cp .env.example .env
#
# 2. Edita .env con tus valores / Edit .env with your values:
#    nano .env   (o usa tu editor favorito / or use your favorite editor)
#
# 3. Genera secretos seguros / Generate secure secrets:
#    openssl rand -hex 32
#
# 4. ‚ö†Ô∏è  NUNCA subas .env al repositorio (ya est√° en .gitignore)
#    ‚ö†Ô∏è  NEVER commit .env to repository (already in .gitignore)
#
# =============================================================================
# üîê SEGURIDAD / SECURITY
# =============================================================================
#
# - Todos los valores "change_me_*" DEBEN ser cambiados
#   All "change_me_*" values MUST be changed
#
# - Las contrase√±as deben tener m√≠nimo 16 caracteres
#   Passwords should have minimum 16 characters
#
# - Los secretos (JWT, encryption keys) deben tener 32+ caracteres
#   Secrets (JWT, encryption keys) should have 32+ characters
#
# - Usa este comando para generar secretos seguros:
#   Use this command to generate secure secrets:
#
#   openssl rand -hex 32
#   # Ejemplo de salida / Example output: a1b2c3d4e5f6...
#
# =============================================================================
# üìñ LEYENDA DE VALORES / VALUE LEGEND
# =============================================================================
#
# change_me_*     = OBLIGATORIO cambiar / REQUIRED to change
# admin@example.* = Cambiar por tu email real / Change to your real email
# localhost       = OK para desarrollo local / OK for local development
# tu-dominio.com  = Cambiar si tienes dominio / Change if you have a domain
#
# =============================================================================


# =============================================================================
# üåê SECCI√ìN 1: RED Y HOSTNAMES
# =============================================================================
#
# Estos valores definen c√≥mo los servicios se comunican entre s√≠ y c√≥mo
# accedes a ellos desde tu navegador.
#
# These values define how services communicate with each other and how
# you access them from your browser.
#
# -----------------------------------------------------------------------------

# HOSTNAME_PUBLIC: La direcci√≥n que usar√°s en tu navegador
# HOSTNAME_PUBLIC: The address you'll use in your browser
#
# Ejemplos / Examples:
#   - Desarrollo local / Local development: localhost
#   - Red local / Local network: 192.168.1.100 (tu IP local / your local IP)
#   - Con dominio / With domain: mi-servidor.ejemplo.com
#
HOSTNAME_PUBLIC=localhost

# HOSTNAME_INTERNAL: C√≥mo los contenedores se encuentran entre s√≠
# HOSTNAME_INTERNAL: How containers find each other
#
# ‚ö†Ô∏è  Generalmente igual que HOSTNAME_PUBLIC
#     Usually same as HOSTNAME_PUBLIC
#
HOSTNAME_INTERNAL=localhost


# =============================================================================
# üîå SECCI√ìN 2: PUERTOS DE SERVICIOS
# =============================================================================
#
# Cada servicio tiene dos puertos:
#   - HOST: El puerto en tu m√°quina (el que usas en el navegador)
#   - CONTAINER: El puerto interno del contenedor (no cambiar)
#
# Each service has two ports:
#   - HOST: The port on your machine (the one you use in browser)
#   - CONTAINER: The internal container port (don't change)
#
# ‚ö†Ô∏è  Si un puerto est√° ocupado, solo cambia el *_HOST
#     If a port is busy, only change the *_HOST
#
# -----------------------------------------------------------------------------

# ü§ñ OLLAMA - Servidor de modelos de IA / AI Model Server
# Acceso / Access: http://localhost:11434
PORT_OLLAMA_HOST=11434
PORT_OLLAMA_CONTAINER=11434

# üí¨ OPEN WEBUI - Interfaz de chat / Chat Interface
# Acceso / Access: http://localhost:3000
PORT_OPEN_WEBUI_HOST=3000
PORT_OPEN_WEBUI_CONTAINER=8080

# ‚ö° N8N - Automatizaci√≥n de flujos / Workflow Automation
# Acceso / Access: http://localhost:5678
PORT_N8N_HOST=5678
PORT_N8N_CONTAINER=5678

# üîç QDRANT - Base de datos vectorial / Vector Database
# Acceso / Access: http://localhost:6333
PORT_QDRANT_HOST=6333
PORT_QDRANT_CONTAINER=6333

# üêò POSTGRESQL - Base de datos principal / Main Database
# Acceso / Access: localhost:5432 (con cliente SQL / with SQL client)
PORT_POSTGRES_HOST=5432
PORT_POSTGRES_CONTAINER=5432

# üêò PGVECTOR - PostgreSQL con vectores / PostgreSQL with vectors
# Acceso / Access: localhost:5433 (con cliente SQL / with SQL client)
# ‚ö†Ô∏è  Puerto diferente a PostgreSQL principal / Different port than main PostgreSQL
PORT_PGVECTOR_HOST=5433
PORT_PGVECTOR_CONTAINER=5432

# üìä GRAFANA - Dashboards de monitoreo / Monitoring Dashboards
# Acceso / Access: http://localhost:3001
PORT_GRAFANA_HOST=3001
PORT_GRAFANA_CONTAINER=3000

# üìà PROMETHEUS - Recolector de m√©tricas / Metrics Collector
# Acceso / Access: http://localhost:9090
PORT_PROMETHEUS_HOST=9090
PORT_PROMETHEUS_CONTAINER=9090

# üö® ALERTMANAGER - Gesti√≥n de alertas / Alert Management
# Acceso / Access: http://localhost:9093
PORT_ALERTMANAGER_HOST=9093
PORT_ALERTMANAGER_CONTAINER=9093

# üìä NODE EXPORTER - M√©tricas del sistema / System Metrics
# Acceso / Access: http://localhost:9100/metrics
PORT_NODE_EXPORTER_HOST=9100
PORT_NODE_EXPORTER_CONTAINER=9100

# üê≥ CADVISOR - M√©tricas de contenedores / Container Metrics
# Acceso / Access: http://localhost:8082
PORT_CADVISOR_HOST=8082
PORT_CADVISOR_CONTAINER=8080

# üîê KEYCLOAK - Autenticaci√≥n centralizada / Centralized Authentication
# Acceso / Access: http://localhost:8080
PORT_KEYCLOAK_HOST=8080
PORT_KEYCLOAK_CONTAINER=8080

# üèóÔ∏è JENKINS - CI/CD Pipeline
# Acceso / Access: http://localhost:8081
PORT_JENKINS_HOST=8081
PORT_JENKINS_CONTAINER=8080
PORT_JENKINS_AGENT_HOST=50000
PORT_JENKINS_AGENT_CONTAINER=50000

# üî¥ REDIS - Cache y sesiones / Cache and Sessions
# Acceso / Access: localhost:6379 (con redis-cli)
PORT_REDIS_HOST=6379
PORT_REDIS_CONTAINER=6379

# ‚öñÔ∏è HAPROXY - Balanceador de carga / Load Balancer
# Acceso / Access: http://localhost:80 y https://localhost:443
PORT_HAPROXY_HTTP_HOST=80
PORT_HAPROXY_HTTP_CONTAINER=80
PORT_HAPROXY_HTTPS_HOST=443
PORT_HAPROXY_HTTPS_CONTAINER=443

# üìä POSTGRES EXPORTER - M√©tricas de PostgreSQL / PostgreSQL Metrics
# Acceso / Access: http://localhost:9187/metrics
PORT_POSTGRES_EXPORTER_HOST=9187
PORT_POSTGRES_EXPORTER_CONTAINER=9187


# =============================================================================
# üîó SECCI√ìN 3: URLs AUTOM√ÅTICAS (NO MODIFICAR)
# =============================================================================
#
# Estas URLs se construyen autom√°ticamente usando los valores anteriores.
# ‚ö†Ô∏è  NO las modifiques a menos que sepas lo que haces.
#
# These URLs are built automatically using the previous values.
# ‚ö†Ô∏è  DON'T modify unless you know what you're doing.
#
# -----------------------------------------------------------------------------

# URLs p√∫blicas (para navegador / for browser)
KEYCLOAK_URL_PUBLIC=http://${HOSTNAME_PUBLIC}:${PORT_KEYCLOAK_HOST}
OPEN_WEBUI_URL_PUBLIC=http://${HOSTNAME_PUBLIC}:${PORT_OPEN_WEBUI_HOST}
N8N_URL_PUBLIC=http://${HOSTNAME_PUBLIC}:${PORT_N8N_HOST}
GRAFANA_URL_PUBLIC=http://${HOSTNAME_PUBLIC}:${PORT_GRAFANA_HOST}

# URLs internas (comunicaci√≥n entre contenedores / inter-container communication)
KEYCLOAK_URL_INTERNAL=http://${KEYCLOAK_HOST_INTERNAL}:${PORT_KEYCLOAK_CONTAINER}
OLLAMA_URL_INTERNAL=http://${OLLAMA_HOST_INTERNAL}:${OLLAMA_PORT_INTERNAL}


# =============================================================================
# ‚öôÔ∏è SECCI√ìN 4: CONFIGURACI√ìN COM√öN
# =============================================================================
#
# Configuraciones que aplican a todos los servicios.
# Configurations that apply to all services.
#
# -----------------------------------------------------------------------------

# Zona horaria / Timezone
# Lista completa / Full list: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
# Ejemplos / Examples: America/New_York, Europe/Madrid, America/Mexico_City
TZ=UTC

# IDs de usuario y grupo (para permisos de archivos)
# User and group IDs (for file permissions)
#
# Para encontrar tus IDs / To find your IDs:
#   id -u    # Muestra PUID / Shows PUID
#   id -g    # Muestra PGID / Shows PGID
#
PUID=1000
PGID=1000


# =============================================================================
# ü§ñ SECCI√ìN 5: OLLAMA - Servidor de Modelos de IA
# =============================================================================
#
# Ollama ejecuta modelos de lenguaje (LLMs) como Llama, Mistral, etc.
# Ollama runs language models (LLMs) like Llama, Mistral, etc.
#
# üìö Documentaci√≥n / Documentation: https://ollama.ai/
# üìö Modelos disponibles / Available models: https://ollama.ai/library
#
# -----------------------------------------------------------------------------

# Hostname interno (nombre del contenedor Docker)
# Internal hostname (Docker container name)
OLLAMA_HOST_INTERNAL=ollama
OLLAMA_PORT_INTERNAL=11434

# OLLAMA_MAX_LOADED_MODELS: Cu√°ntos modelos mantener en memoria
# OLLAMA_MAX_LOADED_MODELS: How many models to keep in memory
#
# ‚ö†Ô∏è  Cada modelo usa 4-16GB de VRAM
#     Each model uses 4-16GB of VRAM
#
# Recomendado / Recommended:
#   - 8GB VRAM: 1 modelo
#   - 16GB VRAM: 2 modelos
#   - 24GB+ VRAM: 3-4 modelos
#
OLLAMA_MAX_LOADED_MODELS=2

# OLLAMA_NUM_THREAD: Hilos de CPU para procesamiento
# OLLAMA_NUM_THREAD: CPU threads for processing
#
# Recomendado / Recommended: n√∫mero de n√∫cleos de tu CPU - 2
#                            your CPU core count - 2
#
OLLAMA_NUM_THREAD=8

# OLLAMA_KEEP_ALIVE: Tiempo que el modelo permanece en memoria sin uso
# OLLAMA_KEEP_ALIVE: Time model stays in memory without use
#
# Ejemplos / Examples: 5m (5 minutos), 1h (1 hora), 0 (siempre/always)
#
OLLAMA_KEEP_ALIVE=10m

# OLLAMA_SHM_SIZE: Memoria compartida para el contenedor
# OLLAMA_SHM_SIZE: Shared memory for container
#
# ‚ö†Ô∏è  Aumentar si ves errores de memoria
#     Increase if you see memory errors
#
OLLAMA_SHM_SIZE=2g


# =============================================================================
# üêò SECCI√ìN 6: POSTGRESQL - Base de Datos Principal
# =============================================================================
#
# PostgreSQL almacena datos de n8n, Keycloak, Grafana, etc.
# PostgreSQL stores data for n8n, Keycloak, Grafana, etc.
#
# ‚ö†Ô∏è  CAMBIA TODOS LOS VALORES "change_me_*"
#     CHANGE ALL "change_me_*" VALUES
#
# -----------------------------------------------------------------------------

# Usuario administrador de PostgreSQL
# PostgreSQL admin user
#
# Ejemplo / Example: pgadmin, dbadmin, myuser
#
POSTGRES_USER=pgadmin

# Contrase√±a de PostgreSQL
# PostgreSQL password
#
# ‚ö†Ô∏è  OBLIGATORIO: M√≠nimo 16 caracteres, mezcla letras, n√∫meros, s√≠mbolos
#     REQUIRED: Minimum 16 characters, mix letters, numbers, symbols
#
# Genera una segura / Generate a secure one:
#   openssl rand -base64 24
#
POSTGRES_PASSWORD=change_me_secure_password_min_16_chars

# Base de datos principal (usada por n8n)
# Main database (used by n8n)
POSTGRES_DB=n8n_db

# M√°ximo de conexiones simult√°neas
# Maximum simultaneous connections
#
# Recomendado / Recommended: 100-200 para la mayor√≠a de casos
#                            100-200 for most cases
#
POSTGRES_MAX_CONNECTIONS=200

# Hostname interno (nombre del contenedor)
# Internal hostname (container name)
POSTGRES_HOSTNAME=postgres
POSTGRES_HOST_INTERNAL=postgres
POSTGRES_PORT_INTERNAL=5432


# =============================================================================
# üêò SECCI√ìN 7: PGVECTOR - PostgreSQL con Vectores
# =============================================================================
#
# pgvector permite b√∫squedas sem√°nticas (embeddings) para RAG.
# pgvector enables semantic searches (embeddings) for RAG.
#
# üìö Documentaci√≥n / Documentation: https://github.com/pgvector/pgvector
#
# -----------------------------------------------------------------------------

# Usuario de pgvector (puede ser diferente al PostgreSQL principal)
# pgvector user (can be different from main PostgreSQL)
PGVECTOR_USER=vectoradmin

# Contrase√±a de pgvector
# pgvector password
#
# Genera una segura / Generate a secure one:
#   openssl rand -base64 24
#
PGVECTOR_PASSWORD=change_me_pgvector_password

# Base de datos de vectores
# Vector database
PGVECTOR_DB=vectors_db


# =============================================================================
# ‚ö° SECCI√ìN 8: N8N - Automatizaci√≥n de Flujos
# =============================================================================
#
# n8n es una herramienta de automatizaci√≥n tipo Zapier pero self-hosted.
# n8n is an automation tool like Zapier but self-hosted.
#
# üìö Documentaci√≥n / Documentation: https://docs.n8n.io/
#
# -----------------------------------------------------------------------------

# Tipo de base de datos (no cambiar / don't change)
N8N_DB_TYPE=postgresdb

# Host de la base de datos (debe coincidir con POSTGRES_HOSTNAME)
# Database host (must match POSTGRES_HOSTNAME)
N8N_DB_HOST=postgres

# N8N_ENCRYPTION_KEY: Clave para encriptar credenciales guardadas
# N8N_ENCRYPTION_KEY: Key to encrypt saved credentials
#
# ‚ö†Ô∏è  CR√çTICO: Si pierdes esta clave, perder√°s acceso a tus credenciales
#     CRITICAL: If you lose this key, you'll lose access to your credentials
#
# Genera una / Generate one:
#   openssl rand -hex 32
#
N8N_ENCRYPTION_KEY=change_me_secure_encryption_key_min_32_chars

# N8N_USER_MANAGEMENT_JWT_SECRET: Secreto para tokens de sesi√≥n
# N8N_USER_MANAGEMENT_JWT_SECRET: Secret for session tokens
#
# Genera uno / Generate one:
#   openssl rand -hex 32
#
N8N_USER_MANAGEMENT_JWT_SECRET=change_me_jwt_secret_key_min_32_chars

# Modo de almacenamiento de datos binarios
# Binary data storage mode
N8N_DEFAULT_BINARY_DATA_MODE=filesystem

# Configuraci√≥n de features
# Feature configuration
N8N_DIAGNOSTICS_ENABLED=false
N8N_PERSONALIZATION_ENABLED=false
N8N_RUNNERS_ENABLED=true
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true

# --- Autenticaci√≥n OIDC con Keycloak ---
# --- OIDC Authentication with Keycloak ---
#
# n8n usa Keycloak para login centralizado
# n8n uses Keycloak for centralized login

N8N_AUTH_TYPE=oidc
N8N_OIDC_CLIENT_ID=n8n
N8N_OIDC_DISPLAY_NAME=Keycloak
N8N_OIDC_SCOPES=openid profile email
N8N_OIDC_REDIRECT_PATH=/rest/oauth2-credential/callback

# --- Configuraci√≥n de Redis ---
# --- Redis Configuration ---
#
# Redis se usa para cach√© y colas de trabajo
# Redis is used for cache and work queues

N8N_REDIS_HOST=redis
N8N_REDIS_PORT=6379
N8N_REDIS_DB=1


# =============================================================================
# üí¨ SECCI√ìN 9: OPEN WEBUI - Interfaz de Chat
# =============================================================================
#
# Open WebUI es la interfaz gr√°fica para chatear con los modelos de IA.
# Open WebUI is the graphical interface to chat with AI models.
#
# üìö Documentaci√≥n / Documentation: https://docs.openwebui.com/
#
# -----------------------------------------------------------------------------

# Configuraci√≥n general / General configuration
OPEN_WEBUI_USER_AGENT=OpenWebUI/0.6.13

# OPEN_WEBUI_ENABLE_SIGNUP: ¬øPermitir registro de nuevos usuarios?
# OPEN_WEBUI_ENABLE_SIGNUP: Allow new user registration?
#
# true  = Cualquiera puede crear cuenta / Anyone can create account
# false = Solo admin puede crear usuarios / Only admin can create users
#
OPEN_WEBUI_ENABLE_SIGNUP=true

# OPEN_WEBUI_ENABLE_LOGIN_FORM: ¬øMostrar formulario de login?
# OPEN_WEBUI_ENABLE_LOGIN_FORM: Show login form?
#
# true  = Muestra usuario/contrase√±a + bot√≥n SSO
# false = Solo muestra bot√≥n SSO (Keycloak)
#
OPEN_WEBUI_ENABLE_LOGIN_FORM=true

# --- Autenticaci√≥n OAuth/OIDC con Keycloak ---
# --- OAuth/OIDC Authentication with Keycloak ---

OPEN_WEBUI_ENABLE_OAUTH_SSO=true
OPEN_WEBUI_ENABLE_OAUTH_SIGNUP=true
OPEN_WEBUI_OAUTH_PROVIDER_NAME=Keycloak
OPEN_WEBUI_OAUTH_ENABLED=true
OPEN_WEBUI_OAUTH_CLIENT_ID=open-webui

# OPEN_WEBUI_OAUTH_CLIENT_SECRET: Secreto compartido con Keycloak
# OPEN_WEBUI_OAUTH_CLIENT_SECRET: Shared secret with Keycloak
#
# ‚ö†Ô∏è  Este secreto se genera autom√°ticamente por keycloak-init
#     This secret is auto-generated by keycloak-init
#
# O genera uno manualmente / Or generate one manually:
#   openssl rand -hex 32
#
OPEN_WEBUI_OAUTH_CLIENT_SECRET=change_me_random_generated_secret_32_chars

OPEN_WEBUI_OAUTH_SCOPES=openid profile email
OPEN_WEBUI_OAUTH_REDIRECT_PATH=/oauth/oidc/callback

# --- Optimizaci√≥n de RAG & Embeddings ---
# --- RAG & Embeddings Optimization ---

OPEN_WEBUI_RAG_SYSTEM_CONTEXT=true
OPEN_WEBUI_USE_EMBEDDING_CACHE=true

# --- Usuario Admin OIDC (para bypass inicial) ---
# --- OIDC Admin User (for initial bypass) ---
#
# Estos valores crean el usuario administrador inicial
# These values create the initial admin user

OPEN_WEBUI_OIDC_USER_EMAIL=admin@example.com
OPEN_WEBUI_OIDC_USER_NAME="Admin User"
OPEN_WEBUI_OIDC_USER_GIVEN_NAME=Admin
OPEN_WEBUI_OIDC_USER_FAMILY_NAME=User


# =============================================================================
# üìä SECCI√ìN 10: GRAFANA - Dashboards de Monitoreo
# =============================================================================
#
# Grafana muestra m√©tricas y dashboards del sistema.
# Grafana displays system metrics and dashboards.
#
# üìö Documentaci√≥n / Documentation: https://grafana.com/docs/
#
# -----------------------------------------------------------------------------

# Contrase√±a del administrador de Grafana
# Grafana admin password
#
# ‚ö†Ô∏è  Solo se usa si desactivas OAuth (desarrollo local)
#     Only used if you disable OAuth (local development)
#
GRAFANA_ADMIN_PASSWORD=change_me_admin_password
GRAFANA_ADMIN_EMAIL=admin@example.com

# Base de datos interna de Grafana (dentro de PostgreSQL)
# Grafana internal database (inside PostgreSQL)
GRAFANA_DB_NAME=grafana
GRAFANA_DB_USER=grafana
GRAFANA_DB_PASSWORD=change_me_grafana_db_password

# Configuraci√≥n de usuarios
# User configuration
GRAFANA_USERS_ALLOW_SIGN_UP=false
GRAFANA_USERS_AUTO_LOGIN=false

# --- Autenticaci√≥n OAuth con Keycloak ---
# --- OAuth Authentication with Keycloak ---

GRAFANA_AUTH_GENERIC_OAUTH_ENABLED=true

# GRAFANA_AUTH_DISABLE_LOGIN_FORM: Deshabilitar login con usuario/contrase√±a
# GRAFANA_AUTH_DISABLE_LOGIN_FORM: Disable username/password login
#
# true  = Solo permite login con Keycloak (m√°s seguro / more secure)
# false = Permite ambos m√©todos (√∫til para desarrollo / useful for development)
#
GRAFANA_AUTH_DISABLE_LOGIN_FORM=true

GRAFANA_OAUTH_NAME=Keycloak
GRAFANA_OAUTH_CLIENT_ID=grafana

# GRAFANA_OAUTH_CLIENT_SECRET: Secreto compartido con Keycloak
# GRAFANA_OAUTH_CLIENT_SECRET: Shared secret with Keycloak
#
# Genera uno / Generate one:
#   openssl rand -hex 32
#
GRAFANA_OAUTH_CLIENT_SECRET=change_me_random_generated_secret_32_chars

GRAFANA_OAUTH_SCOPES=openid profile email
GRAFANA_SKIP_ORG_ROLE_SYNC=true


# =============================================================================
# üìà SECCI√ìN 11: PROMETHEUS Y EXPORTERS
# =============================================================================
#
# Prometheus recolecta m√©tricas de todos los servicios.
# Los exporters exponen m√©tricas espec√≠ficas de cada servicio.
#
# Prometheus collects metrics from all services.
# Exporters expose specific metrics from each service.
#
# üìö Documentaci√≥n / Documentation: https://prometheus.io/docs/
#
# -----------------------------------------------------------------------------
# (No requiere configuraci√≥n adicional - usa puertos de la Secci√≥n 2)
# (No additional configuration required - uses ports from Section 2)


# =============================================================================
# üö® SECCI√ìN 12: ALERTMANAGER
# =============================================================================
#
# AlertManager gestiona alertas y notificaciones de Prometheus.
# AlertManager manages alerts and notifications from Prometheus.
#
# üìö Documentaci√≥n / Documentation: https://prometheus.io/docs/alerting/
#
# -----------------------------------------------------------------------------
# (No requiere configuraci√≥n adicional - usa puertos de la Secci√≥n 2)
# (No additional configuration required - uses ports from Section 2)


# =============================================================================
# üîê SECCI√ìN 13: KEYCLOAK - Autenticaci√≥n Centralizada
# =============================================================================
#
# Keycloak maneja el login de todos los servicios (SSO).
# Keycloak manages login for all services (SSO).
#
# üìö Documentaci√≥n / Documentation: https://www.keycloak.org/documentation
#
# ‚ö†Ô∏è  IMPORTANTE: Lee las instrucciones sobre el admin temporal
#     IMPORTANT: Read the instructions about temporary admin
#
# -----------------------------------------------------------------------------

# --- Admin Temporal (Solo para configuraci√≥n inicial) ---
# --- Temporary Admin (Only for initial setup) ---
#
# ‚ö†Ô∏è  Estas credenciales son TEMPORALES y se eliminan despu√©s del primer inicio
#     These credentials are TEMPORARY and are deleted after first boot
#
# El script keycloak-init usa estas credenciales para:
# The keycloak-init script uses these credentials to:
#   1. Crear el realm
#   2. Configurar los clientes (Open WebUI, Grafana, n8n, Jenkins)
#   3. Crear el admin permanente
#
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_ADMIN_EMAIL=admin@example.com
KEYCLOAK_ADMIN_FIRST_NAME=Admin
KEYCLOAK_ADMIN_LAST_NAME=User

# --- Admin Permanente (CAMBIA ESTOS VALORES) ---
# --- Permanent Admin (CHANGE THESE VALUES) ---
#
# Estas son las credenciales que usar√°s despu√©s de la configuraci√≥n inicial
# These are the credentials you'll use after initial setup
#
# El script keycloak-create-permanent-admin.sh crea este usuario
# The keycloak-create-permanent-admin.sh script creates this user
#
KEYCLOAK_PERMANENT_ADMIN_USERNAME=mi_admin
KEYCLOAK_PERMANENT_ADMIN_EMAIL=mi_email@ejemplo.com
KEYCLOAK_PERMANENT_ADMIN_PASSWORD=change_me_permanent_admin_password

# --- Configuraci√≥n del Realm ---
# --- Realm Configuration ---
#
# Un "realm" es un espacio aislado para usuarios y aplicaciones
# A "realm" is an isolated space for users and applications
#
# Ejemplo / Example: mi-empresa, produccion, desarrollo
#
KEYCLOAK_REALM=mi-realm

# Hostname interno (nombre del contenedor Docker)
# Internal hostname (Docker container name)
KEYCLOAK_HOST_INTERNAL=keycloak

# --- Base de datos de Keycloak (dentro de PostgreSQL) ---
# --- Keycloak Database (inside PostgreSQL) ---

KEYCLOAK_DB_TYPE=postgres
KEYCLOAK_DB_NAME=keycloak

# --- Configuraci√≥n del Servidor ---
# --- Server Configuration ---

# KEYCLOAK_HOSTNAME_STRICT: Forzar hostname exacto
# KEYCLOAK_HOSTNAME_STRICT: Force exact hostname
#
# false = Permite acceso desde cualquier hostname (desarrollo)
# true  = Solo permite el hostname configurado (producci√≥n)
#
KEYCLOAK_HOSTNAME_STRICT=false

# KEYCLOAK_HTTP_ENABLED: Permitir conexiones HTTP (sin SSL)
# KEYCLOAK_HTTP_ENABLED: Allow HTTP connections (no SSL)
#
# true  = Permite HTTP (desarrollo local)
# false = Solo HTTPS (producci√≥n)
#
KEYCLOAK_HTTP_ENABLED=true

# Health checks y m√©tricas
# Health checks and metrics
KEYCLOAK_HEALTH_ENABLED=true
KEYCLOAK_HTTP_RELATIVE_PATH=/

# --- Configuraci√≥n de Proxy ---
# --- Proxy Configuration ---
#
# Importante si usas HAProxy o nginx delante de Keycloak
# Important if you use HAProxy or nginx in front of Keycloak

# KEYCLOAK_PROXY: Modo de proxy
# KEYCLOAK_PROXY: Proxy mode
#
# edge      = SSL termina en el proxy (HAProxy maneja HTTPS)
# reencrypt = SSL en proxy Y en Keycloak
# none      = Sin proxy
#
KEYCLOAK_PROXY=edge
KEYCLOAK_PROXY_ADDRESS_FORWARDING=true


# =============================================================================
# üî¥ SECCI√ìN 14: REDIS - Cache y Sesiones
# =============================================================================
#
# Redis almacena cach√© y sesiones temporales.
# Redis stores cache and temporary sessions.
#
# üìö Documentaci√≥n / Documentation: https://redis.io/documentation
#
# -----------------------------------------------------------------------------
# (No requiere configuraci√≥n adicional - usa puertos de la Secci√≥n 2)
# (No additional configuration required - uses ports from Section 2)


# =============================================================================
# ‚öñÔ∏è SECCI√ìN 15: HAPROXY - Balanceador de Carga
# =============================================================================
#
# HAProxy balancea tr√°fico y proporciona un punto de entrada unificado.
# HAProxy balances traffic and provides a unified entry point.
#
# üìö Documentaci√≥n / Documentation: https://www.haproxy.org/#docs
#
# -----------------------------------------------------------------------------
# (No requiere configuraci√≥n adicional - usa puertos de la Secci√≥n 2)
# (No additional configuration required - uses ports from Section 2)


# =============================================================================
# üèóÔ∏è SECCI√ìN 16: JENKINS - CI/CD Pipeline
# =============================================================================
#
# Jenkins automatiza construcci√≥n, pruebas y despliegue.
# Jenkins automates building, testing, and deployment.
#
# üìö Documentaci√≥n / Documentation: https://www.jenkins.io/doc/
#
# -----------------------------------------------------------------------------

# Puerto HTTP interno de Jenkins
# Jenkins internal HTTP port
JENKINS_HTTP_PORT=8080

# URL p√∫blica de Jenkins (para webhooks, etc.)
# Jenkins public URL (for webhooks, etc.)
JENKINS_URL_PUBLIC=http://localhost:8081

# --- Autenticaci√≥n Principal: OIDC con Keycloak ---
# --- Primary Authentication: OIDC with Keycloak ---
#
# ‚ÑπÔ∏è  Jenkins usa Keycloak como m√©todo principal de autenticaci√≥n.
#     Jenkins uses Keycloak as the primary authentication method.
#
# El login se hace a trav√©s de Keycloak SSO, NO con usuario/contrase√±a local.
# Login is done through Keycloak SSO, NOT with local user/password.

JENKINS_OIDC_CLIENT_ID=jenkins

# JENKINS_OIDC_CLIENT_SECRET: Secreto compartido con Keycloak
# JENKINS_OIDC_CLIENT_SECRET: Shared secret with Keycloak
#
# Genera uno / Generate one:
#   openssl rand -hex 32
#
JENKINS_OIDC_CLIENT_SECRET=change_me_random_generated_secret_32_chars

JENKINS_OIDC_SCOPES=openid email profile

# --- Credenciales de Emergencia (FALLBACK - Opcional) ---
# --- Emergency Credentials (FALLBACK - Optional) ---
#
# ‚ö†Ô∏è  ESTAS CREDENCIALES SOLO SE USAN SI KEYCLOAK FALLA
#     THESE CREDENTIALS ARE ONLY USED IF KEYCLOAK FAILS
#
# Jenkins crea un usuario local como respaldo en caso de que:
# Jenkins creates a local user as backup in case:
#   - Keycloak no est√° disponible / Keycloak is unavailable
#   - La configuraci√≥n OIDC falla / OIDC configuration fails
#   - Necesitas acceso de emergencia / You need emergency access
#
# En operaci√≥n normal con Keycloak funcionando, estas credenciales NO se usan.
# In normal operation with Keycloak working, these credentials are NOT used.
#
# Si no quieres usuario de fallback, puedes dejar los valores por defecto.
# If you don't want a fallback user, you can leave the default values.
#
JENKINS_ADMIN_USER=admin
JENKINS_ADMIN_PASSWORD=fallback_emergency_password_change_if_needed


# =============================================================================
# üõ°Ô∏è SECCI√ìN 17: MODSECURITY - Firewall de Aplicaciones
# =============================================================================
#
# ModSecurity protege contra ataques web (SQL injection, XSS, etc.)
# ModSecurity protects against web attacks (SQL injection, XSS, etc.)
#
# üìö Documentaci√≥n / Documentation: https://modsecurity.org/
#
# -----------------------------------------------------------------------------
# (No requiere configuraci√≥n adicional - configuraci√≥n en archivos de reglas)
# (No additional configuration required - configuration in rule files)


# =============================================================================
# üîÑ SECCI√ìN 18: WATCHTOWER - Actualizaciones Autom√°ticas
# =============================================================================
#
# Watchtower actualiza autom√°ticamente los contenedores Docker.
# Watchtower automatically updates Docker containers.
#
# üìö Documentaci√≥n / Documentation: https://containrrr.dev/watchtower/
#
# ‚ö†Ô∏è  Requiere configuraci√≥n de email para notificaciones
#     Requires email configuration for notifications
#
# -----------------------------------------------------------------------------

# WATCHTOWER_CLEANUP: Eliminar im√°genes antiguas despu√©s de actualizar
# WATCHTOWER_CLEANUP: Remove old images after updating
WATCHTOWER_CLEANUP=true

# WATCHTOWER_SCHEDULE: Cu√°ndo buscar actualizaciones (formato cron)
# WATCHTOWER_SCHEDULE: When to check for updates (cron format)
#
# Formato / Format: segundos minutos horas d√≠a_mes mes d√≠a_semana
#                   seconds minutes hours day_month month day_week
#
# Ejemplos / Examples:
#   "0 0 2 * * *"   = Todos los d√≠as a las 2:00 AM
#   "0 0 4 * * 0"   = Domingos a las 4:00 AM
#   "0 30 3 * * *"  = Todos los d√≠as a las 3:30 AM
#
WATCHTOWER_SCHEDULE=0 0 2 * * *

# WATCHTOWER_NOTIFICATIONS: M√©todo de notificaci√≥n
# WATCHTOWER_NOTIFICATIONS: Notification method
#
# Opciones / Options: email, slack, msteams, gotify, shoutrrr
#
WATCHTOWER_NOTIFICATIONS=email

# --- Configuraci√≥n de Email (para notificaciones) ---
# --- Email Configuration (for notifications) ---
#
# ‚ö†Ô∏è  Cambia estos valores con tu configuraci√≥n de email
#     Change these values with your email configuration
#
# Para Gmail:
#   1. Habilita "App Passwords" en tu cuenta de Google
#   2. Genera una contrase√±a de aplicaci√≥n
#   3. Usa esa contrase√±a aqu√≠ (NO tu contrase√±a normal)
#
# For Gmail:
#   1. Enable "App Passwords" in your Google account
#   2. Generate an app password
#   3. Use that password here (NOT your regular password)

# Email remitente / Sender email
WATCHTOWER_EMAIL_FROM=watchtower@tu-dominio.com

# Email destinatario / Recipient email
WATCHTOWER_EMAIL_TO=admin@tu-dominio.com

# Servidor SMTP / SMTP server
# Ejemplos / Examples:
#   Gmail:     smtp.gmail.com
#   Outlook:   smtp.office365.com
#   Yahoo:     smtp.mail.yahoo.com
#
WATCHTOWER_EMAIL_SERVER=smtp.gmail.com

# Puerto SMTP / SMTP port
# 587 = TLS (recomendado / recommended)
# 465 = SSL
# 25  = Sin encriptar (no recomendado / not recommended)
#
WATCHTOWER_EMAIL_SERVER_PORT=587

# Credenciales SMTP / SMTP credentials
WATCHTOWER_EMAIL_SERVER_USER=change_me_email_server_user
WATCHTOWER_EMAIL_SERVER_PASSWORD=change_me_email_server_password


# =============================================================================
# ‚úÖ FIN DE LA CONFIGURACI√ìN
# =============================================================================
#
# üìã CHECKLIST ANTES DE INICIAR / CHECKLIST BEFORE STARTING:
#
# [ ] ¬øCambiaste todos los "change_me_*"?
#     Did you change all "change_me_*"?
#
# [ ] ¬øGeneraste secretos √∫nicos para cada servicio?
#     Did you generate unique secrets for each service?
#
# [ ] ¬øConfiguraste tu zona horaria (TZ)?
#     Did you configure your timezone (TZ)?
#
# [ ] ¬øActualizaste los emails con tu dominio?
#     Did you update emails with your domain?
#
# Para iniciar / To start:
#   ./scripts/stack-manager.sh start
#
# Para ver los logs / To see logs:
#   docker compose logs -f
#
# ¬øProblemas? / Problems?
#   Revisa docs/TROUBLESHOOTING.md
#   Check docs/TROUBLESHOOTING.md
#
# =============================================================================
