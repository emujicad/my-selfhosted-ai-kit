# =============================================================================
# MY SELF-HOSTED AI KIT - Environment Variables
# =============================================================================
# Este archivo contiene todas las variables de entorno para los servicios
# NUNCA subas este archivo al repositorio (está en .gitignore)
#
# Para crear este archivo desde la plantilla:
# cp .env.example .env
# =============================================================================

# =============================================================================
# CONFIGURACIÓN DE RED Y PUERTOS (Global)
# =============================================================================

# -----------------------------------------------------------------------------
# Hostname/FQDN Base
# -----------------------------------------------------------------------------
# Hostname público para acceso desde navegador
HOSTNAME_PUBLIC=change_me_your_domain_or_localhost
# Hostname interno para comunicación entre contenedores
HOSTNAME_INTERNAL=change_me_your_domain_or_localhost

# -----------------------------------------------------------------------------
# Puertos de Servicios (Host:Container)
# -----------------------------------------------------------------------------
# Ollama
PORT_OLLAMA_HOST=11434
PORT_OLLAMA_CONTAINER=11434

# Open WebUI
PORT_OPEN_WEBUI_HOST=3000
PORT_OPEN_WEBUI_CONTAINER=8080

# n8n
PORT_N8N_HOST=5678
PORT_N8N_CONTAINER=5678

# Qdrant
PORT_QDRANT_HOST=6333
PORT_QDRANT_CONTAINER=6333

# PostgreSQL (Principal)
PORT_POSTGRES_HOST=5432
PORT_POSTGRES_CONTAINER=5432

# pgvector
PORT_PGVECTOR_HOST=5433
PORT_PGVECTOR_CONTAINER=5432

# Grafana
PORT_GRAFANA_HOST=3001
PORT_GRAFANA_CONTAINER=3000

# Prometheus
PORT_PROMETHEUS_HOST=9090
PORT_PROMETHEUS_CONTAINER=9090

# AlertManager
PORT_ALERTMANAGER_HOST=9093
PORT_ALERTMANAGER_CONTAINER=9093

# Node Exporter
PORT_NODE_EXPORTER_HOST=9100
PORT_NODE_EXPORTER_CONTAINER=9100

# cAdvisor
PORT_CADVISOR_HOST=8082
PORT_CADVISOR_CONTAINER=8080

# Keycloak
PORT_KEYCLOAK_HOST=8080
PORT_KEYCLOAK_CONTAINER=8080

# Jenkins
PORT_JENKINS_HOST=8081
PORT_JENKINS_CONTAINER=8080
PORT_JENKINS_AGENT_HOST=50000
PORT_JENKINS_AGENT_CONTAINER=50000

# Redis
PORT_REDIS_HOST=6379
PORT_REDIS_CONTAINER=6379

# HAProxy
PORT_HAPROXY_HTTP_HOST=80
PORT_HAPROXY_HTTP_CONTAINER=80
PORT_HAPROXY_HTTPS_HOST=443
PORT_HAPROXY_HTTPS_CONTAINER=443

# PostgreSQL Exporter
PORT_POSTGRES_EXPORTER_HOST=9187
PORT_POSTGRES_EXPORTER_CONTAINER=9187

# -----------------------------------------------------------------------------
# URLs Base para Servicios (se construyen automáticamente)
# -----------------------------------------------------------------------------
# Keycloak URLs (públicas para navegador)
KEYCLOAK_URL_PUBLIC=http://${HOSTNAME_PUBLIC}:${PORT_KEYCLOAK_HOST}

# Keycloak URLs (internas para contenedores)
KEYCLOAK_URL_INTERNAL=http://${KEYCLOAK_HOST_INTERNAL}:${PORT_KEYCLOAK_CONTAINER}

# Open WebUI URLs
OPEN_WEBUI_URL_PUBLIC=http://${HOSTNAME_PUBLIC}:${PORT_OPEN_WEBUI_HOST}

# n8n URLs
N8N_URL_PUBLIC=http://${HOSTNAME_PUBLIC}:${PORT_N8N_HOST}

# Grafana URLs
GRAFANA_URL_PUBLIC=http://${HOSTNAME_PUBLIC}:${PORT_GRAFANA_HOST}

# Ollama URLs (internas)
OLLAMA_URL_INTERNAL=http://${OLLAMA_HOST_INTERNAL}:${OLLAMA_PORT_INTERNAL}

# =============================================================================
# CONFIGURACIÓN COMÚN (Global)
# =============================================================================
TZ=UTC
PUID=1000
PGID=1000

# =============================================================================
# PostgreSQL - Base de datos principal (para n8n y Keycloak)
# =============================================================================
POSTGRES_USER=change_me_postgres_hostname
POSTGRES_PASSWORD=change_me_secure_password_min_16_chars
POSTGRES_DB=change_me_n8n_db_name
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_HOSTNAME=change_me_postgres_hostname
POSTGRES_HOST_INTERNAL=change_me_postgres_hostname
POSTGRES_PORT_INTERNAL=5432

# =============================================================================
# pgvector - PostgreSQL con extensión vectorial
# =============================================================================
PGVECTOR_USER=change_me_pgvector_user
PGVECTOR_PASSWORD=change_me_pgvector_password
PGVECTOR_DB=change_me_pgvector_db_name

# =============================================================================
# Ollama - Servidor de modelos de IA
# =============================================================================
OLLAMA_HOST_INTERNAL=change_me_ollama_hostname
OLLAMA_PORT_INTERNAL=11434

# =============================================================================
# Qdrant - Base de datos vectorial
# =============================================================================
# (No requiere configuración adicional - usa puertos de la sección global)

# =============================================================================
# n8n - Automatización de flujos de trabajo
# =============================================================================
# Database Configuration
N8N_DB_TYPE=change_me_postgres_hostnamedb
N8N_DB_HOST=change_me_postgres_hostname

# Encryption and Security
N8N_ENCRYPTION_KEY=change_me_secure_password_min_16_chars
N8N_USER_MANAGEMENT_JWT_SECRET=change_me_jwt_secret_key_min_32_chars
N8N_DEFAULT_BINARY_DATA_MODE=filesystem

# Feature Flags
N8N_DIAGNOSTICS_ENABLED=false
N8N_PERSONALIZATION_ENABLED=false
N8N_RUNNERS_ENABLED=true
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true

# Authentication Configuration (OIDC/OAuth con Keycloak)
N8N_AUTH_TYPE=oidc
N8N_OIDC_CLIENT_ID=change_me_n8n_db_name
N8N_OIDC_CLIENT_SECRET=change_me_n8n_client_secret_from_keycloak
N8N_OIDC_DISPLAY_NAME=Keycloak
N8N_OIDC_SCOPES=openid profile email
N8N_OIDC_REDIRECT_PATH=/rest/oauth2-credential/callback

# =============================================================================
# Open WebUI - Interfaz web para chat con IA
# =============================================================================
# General Configuration
OPEN_WEBUI_USER_AGENT=OpenWebUI/0.6.13
OPEN_WEBUI_ENABLE_SIGNUP=true
OPEN_WEBUI_ENABLE_LOGIN_FORM=true

# OAuth/OIDC Configuration (Keycloak)
OPEN_WEBUI_ENABLE_OAUTH_SSO=true
OPEN_WEBUI_ENABLE_OAUTH_SIGNUP=true
OPEN_WEBUI_OAUTH_CLIENT_ID=open-webui
OPEN_WEBUI_OAUTH_CLIENT_SECRET=change_me_open_webui_client_secret_from_keycloak
OPEN_WEBUI_OAUTH_PROVIDER_NAME=Keycloak

# OpenID Configuration (Keycloak)
OPEN_WEBUI_OPENID_ENABLED=true
OPEN_WEBUI_OPENID_CLIENT_ID=open-webui
OPEN_WEBUI_OPENID_CLIENT_SECRET=change_me_open_webui_client_secret_from_keycloak
OPEN_WEBUI_OPENID_SCOPES=openid profile email
OPEN_WEBUI_OPENID_REDIRECT_PATH=/oauth/oidc/callback

# =============================================================================
# Grafana - Dashboards y visualización
# =============================================================================
# Admin Configuration
GRAFANA_ADMIN_PASSWORD=change_me_admin_password

# User Management
GRAFANA_USERS_ALLOW_SIGN_UP=false
GRAFANA_USERS_AUTO_LOGIN=false

# OAuth Configuration (Keycloak)
GRAFANA_AUTH_GENERIC_OAUTH_ENABLED=true
GRAFANA_AUTH_DISABLE_LOGIN_FORM=true
GRAFANA_OAUTH_NAME=Keycloak
GRAFANA_OAUTH_CLIENT_ID=grafana
GRAFANA_OAUTH_CLIENT_SECRET=change_me_grafana_client_secret_from_keycloak
GRAFANA_OAUTH_SCOPES=openid profile email

# =============================================================================
# Prometheus - Recolector de métricas
# =============================================================================
# (No requiere configuración adicional - usa puertos de la sección global)

# =============================================================================
# AlertManager - Gestión de alertas
# =============================================================================
# (No requiere configuración adicional - usa puertos de la sección global)

# =============================================================================
# Node Exporter - Métricas del host
# =============================================================================
# (No requiere configuración adicional - usa puertos de la sección global)

# =============================================================================
# cAdvisor - Métricas de contenedores
# =============================================================================
# (No requiere configuración adicional - usa puertos de la sección global)

# =============================================================================
# PostgreSQL Exporter - Métricas de PostgreSQL
# =============================================================================
# (No requiere configuración adicional - usa puertos de la sección global)

# =============================================================================
# Keycloak - Autenticación centralizada
# =============================================================================
# Admin Configuration
KEYCLOAK_ADMIN_USER=change_me_admin_password
KEYCLOAK_ADMIN_PASSWORD=change_me_admin_password

# Realm Configuration
KEYCLOAK_REALM=change_me_keycloak_realm_name

# Hostname Configuration
KEYCLOAK_HOST_INTERNAL=change_me_keycloak_db_name

# Database Configuration
KEYCLOAK_DB_TYPE=change_me_postgres_hostname
KEYCLOAK_DB_NAME=change_me_keycloak_db_name

# Server Configuration
KEYCLOAK_HOSTNAME_STRICT=false
KEYCLOAK_HTTP_ENABLED=true
KEYCLOAK_HEALTH_ENABLED=true
KEYCLOAK_HTTP_RELATIVE_PATH=/

# Proxy Configuration
KEYCLOAK_PROXY=edge
KEYCLOAK_PROXY_ADDRESS_FORWARDING=true

# =============================================================================
# Redis - Cache y sesiones
# =============================================================================
# (No requiere configuración adicional - usa puertos de la sección global)

# =============================================================================
# HAProxy - Load Balancer
# =============================================================================
# (No requiere configuración adicional - usa puertos de la sección global)

# =============================================================================
# Jenkins - CI/CD Pipeline
# =============================================================================
JENKINS_HTTP_PORT=8080

# =============================================================================
# ModSecurity - Firewall de aplicaciones web
# =============================================================================
# (No requiere configuración adicional - configuración en archivos de reglas)

# =============================================================================
# Watchtower - Actualizaciones automáticas
# =============================================================================
# General Configuration
WATCHTOWER_CLEANUP=true
WATCHTOWER_SCHEDULE=0 0 2 * * *
WATCHTOWER_NOTIFICATIONS=email

# Email Configuration
WATCHTOWER_EMAIL_FROM=change_me_watchtower_email_from
WATCHTOWER_EMAIL_TO=change_me_admin_password@yourdomain.com
WATCHTOWER_EMAIL_SERVER=smtp.gmail.com
WATCHTOWER_EMAIL_SERVER_PORT=587
WATCHTOWER_EMAIL_SERVER_USER=change_me_email_server_user
WATCHTOWER_EMAIL_SERVER_PASSWORD=change_me_email_server_password
